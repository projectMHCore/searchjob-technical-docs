# Lab5 - Детальний Test-Case для тестування перевірки паролю

## Інформація про тест

Id: TC_REG_PWD_001  
Build: SearchJob v1.0  
Author: QA Engineer  
Summary: Тестування валідації пароля під час реєстрації користувача  
Module: Модуль реєстрації (RegisterController)  
Precondition: 
- Веб-сервер запущений та доступний
- База даних підключена
- Форма реєстрації завантажена в браузері
- Користувач з таким email/логіном ще не зареєстрований

---

## Детальні кроки тестування

| № | Steps | Description | Expected | Actual | State |
|---|-------|-------------|----------|---------|-------|
| 1 | Відкрити форму реєстрації | Перейти на сторінку register.php | Форма реєстрації відображається з полями: логін, email, пароль, підтвердження пароля, роль | | |
| 2 | Ввести валідний логін | Ввести в поле "login": "testuser123" | Поле заповнене, без помилок валідації | | |
| 3 | Ввести валідний email | Ввести в поле "email": "test@example.com" | Поле заповнене, формат email коректний | | |
| 4 | Ввести пароль | Ввести в поле "password": "MySecurePass123!" | Поле заповнене, пароль прихований символами • | | |
| 5 | Ввести підтвердження пароля (співпадіння) | Ввести в поле "confirm_password": "MySecurePass123!" | Поле заповнене, паролі співпадають | | |
| 6 | Натиснути кнопку "Зареєструватися" | Відправити форму на сервер | Успішна реєстрація, перенаправлення на register.php?success=registered | | |
| 7 | Повторити кроки 1-3 | Заповнити логін, email для нового тесту | Форма готова для тестування неспівпадіння паролів | | |
| 8 | Ввести пароль | Ввести в поле "password": "Password123" | Поле заповнене | | |
| 9 | Ввести неспівпадаючий пароль | Ввести в поле "confirm_password": "Password124" | Поле заповнене, але значення відрізняється | | |
| 10 | Натиснути кнопку "Зареєструватися" | Відправити форму з неспівпадаючими паролями | Помилка валідації: "Пароли не совпадают!", перенаправлення на register.php?error=... | | |
| 11 | Повторити кроки 1-3 | Заповнити логін, email для тесту порожнього пароля | Форма готова для тестування порожнього пароля | | |
| 12 | Залишити пароль порожнім | Не вводити нічого в поле "password" | Поле порожнє | | |
| 13 | Ввести підтвердження пароля | Ввести в поле "confirm_password": "somepassword" | Поле заповнене | | |
| 14 | Натиснути кнопку "Зареєструватися" | Відправити форму з порожнім паролем | Помилка валідації: "Заполните все обязательные поля!", перенаправлення на register.php?error=... | | |
| 15 | Повторити кроки 1-3 | Заповнити логін, email для тесту порожнього підтвердження | Форма готова для тестування порожнього підтвердження | | |
| 16 | Ввести пароль | Ввести в поле "password": "ValidPass123" | Поле заповнене | | |
| 17 | Залишити підтвердження порожнім | Не вводити нічого в поле "confirm_password" | Поле порожнє | | |
| 18 | Натиснути кнопку "Зареєструватися" | Відправити форму з порожнім підтвердженням | Помилка валідації: "Пароли не совпадают!", перенаправлення на register.php?error=... | | |

---

## Технічні деталі валідації

### Код валідації з RegisterController.php:
```php
// Перевірка заповнення всіх полів
if (!$login || !$password || !$email) {
    $error = 'Заполните все обязательные поля!';
}
// Перевірка співпадіння паролів  
elseif ($password !== $confirm_password) {
    $error = 'Пароли не совпадают!';
}
```

### Логіка обробки помилок:
```php
// Очищаємо буфер перед редиректом
ob_end_clean();
// Передаємо помилку назад на форму
header('Location: register.php?error=' . urlencode($error));
exit;
```

### Успішна реєстрація:
```php
if ($result['success']) {
    ob_end_clean(); // Очищуємо буфер перед редиректом
    header('Location: register.php?success=registered');
    exit;
}
```

---

## Тестові дані

### Валідні тестові дані:
- Логін: testuser123, user2024, jobseeker_test
- Email: test@example.com, user@company.org, seeker@job.net  
- Пароль: MySecurePass123!, TestPassword2024, JobSeeker@123
- Роль: job_seeker, employer

### Невалідні тестові дані:
- Неспівпадаючі паролі: "Password123" / "Password124"
- Порожні поля: "" / "somepassword"
- Спеціальні символи: "Pass<script>" / "Pass<script>"

---

## Очікувані результати по кроках

### Позитивний сценарій (кроки 1-6):
- Форма відправляється успішно
- Користувач створений в базі даних
- Перенаправлення на register.php?success=registered
- Відображається повідомлення про успішну реєстрацію

### Негативний сценарій - неспівпадіння (кроки 7-10):
- Валідація спрацьовує на серверній стороні
- Генерується помилка "Пароли не совпадают!"
- Перенаправлення на register.php?error=Пароли не совпадают!
- Форма відображається з повідомленням про помилку

### Негативний сценарій - порожні поля (кроки 11-18):
- Валідація виявляє порожні обов'язкові поля
- Генерується помилка "Заполните все обязательные поля!"
- Користувач залишається на формі для виправлення

---

## Postcondition

### При успішному тесті:
- Новий користувач створений в таблиці users
- Пароль захешований та збережений безпечно
- Всі введені дані валідовані та очищені
- Користувач може авторизуватися з новими даними

### При помилці валідації:
- Користувач НЕ створений в базі даних
- Відображено інформативне повідомлення про помилку
- Можливість повторної спроби реєстрації
- Безпека системи не порушена

### Очищення після тесту:
- Видалити тестового користувача з бази даних
- Очистити кеш сесій
- Перевірити логи на наявність помилок

---

## Критерії проходження тесту

✅ ПРОЙШОВ - якщо всі кроки виконуються згідно з очікуваними результатами  
❌ НЕ ПРОЙШОВ - якщо хоча б один крок відрізняється від очікуваного результату  
⚠️ ЗАБЛОКОВАНИЙ - якщо тест неможливо виконати через зовнішні причини

---

## Додаткові перевірки

1. Перевірка в базі даних: Підтвердити, що запис користувача створений/не створений
2. Перевірка логів: Переглянути error_log на наявність критичних помилок  
3. Перевірка сесії: Переконатися, що сесія не створюється при помилці валідації
4. Тест безпеки: Переконатися, що пароль не передається в URL параметрах

---

Дата створення: 2024  
Версія тест-кейсу: 1.0  
Статус: Готовий до виконання
